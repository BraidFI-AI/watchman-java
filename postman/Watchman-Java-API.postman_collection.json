{
  "info": {
    "_postman_id": "watchman-java-api-collection",
    "name": "Watchman Java API",
    "description": "# Watchman Java API\n\n**Sanctions Screening Service** - Screen individuals and businesses against global sanctions lists (OFAC, EU, UK, UN).\n\n## üöÄ Quick Start\n\n1. Set `baseUrl` variable to your environment\n2. Use `/v1/search` for single entity screening\n3. Use `/v1/search/batch` for bulk screening (up to 1000 items)\n\n## üìö Key Features\n\n- **Single Entity Search**: Real-time screening with fuzzy matching\n- **Batch Screening**: Process up to 1000 entities in one request\n- **Score Tracing**: Debug scoring with `trace=true` for detailed breakdowns\n- **Flexible Filtering**: Filter by source list, entity type, or custom thresholds\n- **High Performance**: Parallel processing with sub-second response times\n\n## üéØ Common Use Cases\n\n**KYC Onboarding**: Screen new customers during registration\n```\nGET /v1/search?name=John%20Doe&minMatch=0.85\n```\n\n**Transaction Monitoring**: Batch screen payment recipients\n```\nPOST /v1/search/batch\n{ \"items\": [{\"id\": \"txn-1\", \"name\": \"Recipient Name\"}], \"minMatch\": 0.9 }\n```\n\n**Score Tuning**: Use trace mode to optimize thresholds\n```\nGET /v1/search?name=Test&trace=true\n```\n\n## üåç Data Sources\n\n- **OFAC SDN**: US Treasury sanctions list (~12,500 entities)\n- **US CSL**: Consolidated Screening List (~8,000 entities)\n- **EU CSL**: European Union sanctions (~5,000 entities)\n- **UK CSL**: UK sanctions list (~3,000 entities)\n\n## ‚öôÔ∏è Configuration\n\n**Base URLs**:\n- Local Development: `http://localhost:8084`\n- Production (Fly.io): `http://54.209.239.50:8080`\n\n**Default Parameters**:\n- `minMatch`: 0.85 (85% similarity threshold)\n- `limit`: 10 results per query\n\n## üìñ Documentation\n\nEach folder contains detailed endpoint documentation with:\n- Parameter descriptions and examples\n- Response schemas with sample data\n- Best practices and performance tips\n- Common error scenarios\n\n## üîç Score Tracing\n\nEnable detailed scoring breakdowns for debugging:\n- **Single Search**: Add `?trace=true` query parameter\n- **Batch Search**: Add `\"trace\": true` to request body\n\nTrace output includes:\n- Component scores (name, address, DOB, ID)\n- Normalization steps\n- Candidate selection process\n- Final score calculation",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8084",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health & Info",
      "description": "## Health & System Information\n\nMonitor service health and get information about loaded sanctions data.\n\n### Endpoints\n\n- **GET /health** - Service health check\n- **GET /v1/listinfo** - Available sanctions lists and counts\n\n### Use Cases\n\n‚úÖ **Readiness Checks**: Verify service is ready before screening\n‚úÖ **Monitoring**: Set up health check alerts\n‚úÖ **Data Validation**: Confirm expected entity counts are loaded\n‚úÖ **Debugging**: Check which lists are available for filtering\n\n### Best Practices\n\n- Poll `/health` endpoint for uptime monitoring\n- Check `/listinfo` after data refresh to verify counts\n- Use list names from `/listinfo` for source filtering in searches",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Check if the service is healthy and running"
          },
          "response": [
            {
              "name": "Healthy Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"status\": \"UP\",\n  \"timestamp\": \"2026-01-03T00:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Get Available Lists",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/listinfo",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "listinfo"
              ]
            },
            "description": "Get information about available sanctions lists"
          },
          "response": [
            {
              "name": "Lists Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"lists\": [\n    {\"name\": \"OFAC SDN\", \"count\": 12500},\n    {\"name\": \"US CSL\", \"count\": 8000},\n    {\"name\": \"EU CSL\", \"count\": 5000},\n    {\"name\": \"UK CSL\", \"count\": 3000}\n  ]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Search",
      "description": "## Single Entity Search\n\nScreen individual names against global sanctions lists with real-time fuzzy matching.\n\n### Endpoint\n\n```\nGET /v1/search?name={query}&minMatch={threshold}&limit={max_results}\n```\n\n### Key Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `name` | string | required | Name to screen (person or business) |\n| `minMatch` | float | 0.85 | Score threshold (0.0-1.0) |\n| `limit` | int | 10 | Maximum results to return |\n| `source` | string | all | Filter by list (OFAC_SDN, US_CSL, EU_CSL, UK_CSL) |\n| `type` | string | all | Filter by type (PERSON, BUSINESS, VESSEL, AIRCRAFT) |\n| `trace` | boolean | false | Enable detailed score breakdown |\n\n### Response Structure\n\n```json\n{\n  \"entities\": [\n    {\n      \"id\": \"12345\",\n      \"name\": \"JOHN DOE\",\n      \"type\": \"PERSON\",\n      \"source\": \"OFAC_SDN\",\n      \"score\": 0.95,\n      \"altNames\": [...],\n      \"programs\": [\"SDGT\"],\n      \"breakdown\": null  // populated when trace=true\n    }\n  ],\n  \"totalResults\": 1,\n  \"requestID\": \"req-123\",\n  \"debug\": null  // populated when trace=true\n}\n```\n\n### Performance\n\n- **Average Response Time**: < 50ms\n- **P99 Response Time**: < 200ms\n- **Concurrent Requests**: 100+ per second\n\n### Scoring Guidelines\n\n| Threshold | Use Case | False Positive Rate |\n|-----------|----------|-------------------|\n| 0.95+ | High confidence matches only | Very Low |\n| 0.85-0.94 | Standard screening (recommended) | Low |\n| 0.70-0.84 | Fuzzy matching for variants | Medium |\n| < 0.70 | Not recommended | High |\n\n### Best Practices\n\n‚úÖ **Start with 0.85**: Good balance of accuracy and coverage\n‚úÖ **Use trace mode**: Debug unexpected scores or missing matches\n‚úÖ **Filter by source**: Reduce false positives for specific jurisdictions\n‚úÖ **Handle high scores first**: Review 0.95+ matches as highest priority\n‚úÖ **Log request IDs**: Include in audit trails for compliance\n\n### Common Patterns\n\n**1. KYC Screening**\n```\n/v1/search?name=Customer%20Name&minMatch=0.85&limit=5\n```\n\n**2. Vendor Due Diligence**\n```\n/v1/search?name=Vendor%20Corp&type=BUSINESS&minMatch=0.90\n```\n\n**3. OFAC-Only Check**\n```\n/v1/search?name=Test%20Entity&source=OFAC_SDN&minMatch=0.85\n```\n\n**4. Debug Low Scores**\n```\n/v1/search?name=John%20Doe&trace=true&minMatch=0.70\n```",
      "item": [
        {
          "name": "Search by Name",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search?name=John%20Doe&limit=10&minMatch=0.85",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "John%20Doe",
                  "description": "Name to search for (required)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Maximum number of results (default: 10)"
                },
                {
                  "key": "minMatch",
                  "value": "0.85",
                  "description": "Minimum match score threshold 0.0-1.0 (default: 0.85)"
                }
              ]
            },
            "description": "## Basic Name Search\n\nScreen a name against all sanctions lists using fuzzy matching.\n\n### When to Use\n- ‚úÖ KYC customer onboarding\n- ‚úÖ Payment beneficiary screening  \n- ‚úÖ Vendor due diligence\n- ‚úÖ Employee background checks\n\n### Query Parameters\n\n- **name** (required): Name to screen\n  - Can be person or business name\n  - Case-insensitive\n  - Handles name variations automatically\n\n- **limit** (optional, default: 10): Max results\n  - Range: 1-100\n  - Higher values = more candidates but slower response\n  - Tip: Start with 10, increase if missing matches\n\n- **minMatch** (optional, default: 0.85): Score threshold\n  - Range: 0.0-1.0\n  - 0.85 = 85% similarity\n  - Lower values = more matches but more false positives\n\n### Response\n\n**entities[]**: Array of matches\n- `id`: Unique entity identifier\n- `name`: Official name on sanctions list\n- `score`: Match confidence (0.0-1.0)\n- `type`: PERSON, BUSINESS, VESSEL, or AIRCRAFT\n- `source`: Which list (OFAC_SDN, EU_CSL, etc.)\n- `altNames`: Known aliases and variations\n- `programs`: Sanctions programs (e.g., SDGT, IRAN)\n\n### Examples\n\n**Person**:\n```\n/v1/search?name=John%20Doe&limit=10\n```\n\n**Business**:\n```\n/v1/search?name=Acme%20Corporation&limit=10\n```\n\n**Low confidence check**:\n```\n/v1/search?name=Mohammad&minMatch=0.70&limit=50\n```\n\n### Tips\n\nüí° **Review scores carefully**: 0.95+ are strong matches, 0.85-0.94 need review\nüí° **Check altNames**: Shows why the match was found\nüí° **Log requestID**: Include in compliance audit logs"
          },
          "response": [
            {
              "name": "Search Results",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"entities\": [\n    {\n      \"id\": \"12345\",\n      \"name\": \"JOHN DOE\",\n      \"type\": \"PERSON\",\n      \"source\": \"OFAC_SDN\",\n      \"sourceId\": \"12345\",\n      \"score\": 0.95,\n      \"altNames\": [\n        \"JOHNNY DOE\",\n        \"DOE, JOHN\"\n      ],\n      \"programs\": [\n        \"SDGT\"\n      ],\n      \"breakdown\": null\n    }\n  ],\n  \"totalResults\": 1,\n  \"requestID\": \"req-123\",\n  \"debug\": null\n}"
            }
          ]
        },
        {
          "name": "Search with Source Filter",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search?name=Acme%20Corp&source=OFAC_SDN&limit=25",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "Acme%20Corp",
                  "description": "Name to search for"
                },
                {
                  "key": "source",
                  "value": "OFAC_SDN",
                  "description": "Filter by source list (OFAC_SDN, US_CSL, EU_CSL, UK_CSL)"
                },
                {
                  "key": "limit",
                  "value": "25",
                  "description": "Maximum number of results"
                }
              ]
            },
            "description": "Search with source list filter"
          },
          "response": [
            {
              "name": "Filtered Search Results",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"entities\": [\n    {\n      \"id\": \"67890\",\n      \"name\": \"ACME CORPORATION\",\n      \"type\": \"BUSINESS\",\n      \"source\": \"OFAC_SDN\",\n      \"sourceId\": \"67890\",\n      \"score\": 0.92,\n      \"altNames\": [\n        \"ACME CORP\",\n        \"ACME CO.\"\n      ],\n      \"programs\": [\n        \"SYRIA\"\n      ],\n      \"breakdown\": null\n    }\n  ],\n  \"totalResults\": 1,\n  \"requestID\": null,\n  \"debug\": null\n}"
            }
          ]
        },
        {
          "name": "Search with Type Filter",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search?name=Bank&type=BUSINESS&minMatch=0.80",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "Bank",
                  "description": "Name to search for"
                },
                {
                  "key": "type",
                  "value": "BUSINESS",
                  "description": "Filter by entity type (PERSON, BUSINESS, VESSEL, AIRCRAFT, UNKNOWN)"
                },
                {
                  "key": "minMatch",
                  "value": "0.80",
                  "description": "Minimum match score"
                }
              ]
            },
            "description": "Search filtered by entity type"
          },
          "response": [
            {
              "name": "Type Filtered Results",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"entities\": [\n    {\n      \"id\": \"11223\",\n      \"name\": \"BANK OF COMMERCE\",\n      \"type\": \"BUSINESS\",\n      \"source\": \"OFAC_SDN\",\n      \"sourceId\": \"11223\",\n      \"score\": 0.88,\n      \"altNames\": [\n        \"COMMERCE BANK\"\n      ],\n      \"programs\": [\n        \"IRAN\"\n      ],\n      \"breakdown\": null\n    }\n  ],\n  \"totalResults\": 1,\n  \"requestID\": null,\n  \"debug\": null\n}"
            }
          ]
        },
        {
          "name": "Search - Low Threshold",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search?name=Mohammad&minMatch=0.70&limit=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "Mohammad",
                  "description": "Common name with variations"
                },
                {
                  "key": "minMatch",
                  "value": "0.70",
                  "description": "Lower threshold to catch spelling variations"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Higher limit for fuzzy matches"
                }
              ]
            },
            "description": "Search with lower threshold for fuzzy matching"
          },
          "response": [
            {
              "name": "Fuzzy Match Results",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"entities\": [\n    {\n      \"id\": \"45678\",\n      \"name\": \"MOHAMMAD ALI AHMED\",\n      \"type\": \"PERSON\",\n      \"source\": \"OFAC_SDN\",\n      \"sourceId\": \"45678\",\n      \"score\": 0.78,\n      \"altNames\": [\n        \"MOHAMMED ALI AHMAD\",\n        \"MUHAMMAD A. AHMED\"\n      ],\n      \"programs\": [\n        \"SDGT\"\n      ],\n      \"breakdown\": null\n    },\n    {\n      \"id\": \"45679\",\n      \"name\": \"MOHAMMAD HASSAN\",\n      \"type\": \"PERSON\",\n      \"source\": \"EU_CSL\",\n      \"sourceId\": \"45679\",\n      \"score\": 0.72,\n      \"altNames\": [\n        \"MOHAMMED HASAN\"\n      ],\n      \"programs\": null,\n      \"breakdown\": null\n    }\n  ],\n  \"totalResults\": 2,\n  \"requestID\": null,\n  \"debug\": null\n}"
            }
          ]
        },
        {
          "name": "Search with ScoreTrace",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search?name=John%20Doe&limit=10&minMatch=0.85&trace=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "John%20Doe",
                  "description": "Name to search for"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Maximum number of results"
                },
                {
                  "key": "minMatch",
                  "value": "0.85",
                  "description": "Minimum match score threshold"
                },
                {
                  "key": "trace",
                  "value": "true",
                  "description": "Enable detailed scoring breakdown for debugging (default: false)"
                }
              ]
            },
            "description": "Search with trace enabled to see detailed score breakdown for debugging/tuning"
          },
          "response": [
            {
              "name": "Search Results with Trace",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"entities\": [\n    {\n      \"id\": \"12345\",\n      \"name\": \"JOHN DOE\",\n      \"type\": \"PERSON\",\n      \"source\": \"OFAC_SDN\",\n      \"sourceId\": \"12345\",\n      \"score\": 0.95,\n      \"altNames\": [\n        \"JOHNNY DOE\",\n        \"DOE, JOHN\"\n      ],\n      \"programs\": [\n        \"SDGT\"\n      ],\n      \"breakdown\": {\n        \"primaryNameScore\": 0.95,\n        \"altNameScore\": 0.88,\n        \"addressScore\": 0.0,\n        \"dobScore\": 0.0,\n        \"idScore\": 0.0,\n        \"totalWeightedScore\": 0.95,\n        \"components\": [\n          {\n            \"field\": \"primaryName\",\n            \"queryValue\": \"John Doe\",\n            \"candidateValue\": \"JOHN DOE\",\n            \"rawScore\": 0.95,\n            \"weight\": 1.0,\n            \"weightedScore\": 0.95\n          },\n          {\n            \"field\": \"altName\",\n            \"queryValue\": \"John Doe\",\n            \"candidateValue\": \"JOHNNY DOE\",\n            \"rawScore\": 0.88,\n            \"weight\": 0.9,\n            \"weightedScore\": 0.792\n          }\n        ]\n      }\n    }\n  ],\n  \"totalResults\": 1,\n  \"requestID\": \"req-123\",\n  \"debug\": {\n    \"traceId\": \"trace-abc-123\",\n    \"events\": [\n      {\n        \"timestamp\": \"2026-01-11T00:00:00Z\",\n        \"phase\": \"NORMALIZATION\",\n        \"message\": \"Normalized query name: John Doe -> john doe\"\n      },\n      {\n        \"timestamp\": \"2026-01-11T00:00:01Z\",\n        \"phase\": \"CANDIDATE_SELECTION\",\n        \"message\": \"Found 50 candidates\"\n      },\n      {\n        \"timestamp\": \"2026-01-11T00:00:02Z\",\n        \"phase\": \"SCORING\",\n        \"message\": \"Scored 50 candidates\"\n      }\n    ]\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Batch Screening",
      "description": "## Batch Screening\n\nScreen multiple entities simultaneously with efficient parallel processing.\n\n### Endpoints\n\n- **POST /v1/search/batch** - Synchronous batch screening (up to 1000 items)\n- **POST /v1/search/batch/async** - Asynchronous processing for large batches\n\n### Request Format\n\n```json\n{\n  \"items\": [\n    {\"id\": \"req-1\", \"name\": \"John Smith\"},\n    {\"id\": \"req-2\", \"name\": \"Acme Corp\", \"type\": \"BUSINESS\", \"source\": \"OFAC_SDN\"}\n  ],\n  \"minMatch\": 0.85,\n  \"limit\": 10,\n  \"trace\": false\n}\n```\n\n### Parameters\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `items` | array | ‚úÖ Yes | 1-1000 entities to screen |\n| `items[].id` | string | ‚úÖ Yes | Your unique ID for this entity |\n| `items[].name` | string | ‚úÖ Yes | Entity name to screen |\n| `items[].type` | string | ‚ùå No | Filter: PERSON, BUSINESS, VESSEL, AIRCRAFT |\n| `items[].source` | string | ‚ùå No | Filter: OFAC_SDN, US_CSL, EU_CSL, UK_CSL |\n| `minMatch` | float | ‚ùå No | Score threshold (default: 0.85) |\n| `limit` | int | ‚ùå No | Max results per item (default: 10) |\n| `trace` | boolean | ‚ùå No | Enable detailed breakdowns (default: false) |\n\n### Response Structure\n\n```json\n{\n  \"results\": [\n    {\n      \"itemId\": \"req-1\",\n      \"name\": \"John Smith\",\n      \"matches\": [\n        {\n          \"entityId\": \"12345\",\n          \"name\": \"JOHN SMITH\",\n          \"type\": \"PERSON\",\n          \"source\": \"OFAC_SDN\",\n          \"score\": 0.98,\n          \"breakdown\": null  // present when trace=true\n        }\n      ],\n      \"matchCount\": 1,\n      \"trace\": null  // present when trace=true\n    }\n  ],\n  \"statistics\": {\n    \"totalItems\": 1,\n    \"itemsWithMatches\": 1,\n    \"itemsWithoutMatches\": 0,\n    \"totalMatches\": 1,\n    \"processingTimeMs\": 45\n  }\n}\n```\n\n### Performance\n\n| Batch Size | Avg Response Time | Recommended Use |\n|------------|------------------|----------------|\n| 1-10 items | < 100ms | Real-time checks |\n| 11-100 items | < 500ms | Transaction monitoring |\n| 101-500 items | 1-3s | Periodic screening |\n| 501-1000 items | 3-8s | Batch processing |\n| 1000+ items | Use async | Large bulk imports |\n\n### Best Practices\n\n‚úÖ **Use meaningful IDs**: Include your system IDs for easy correlation\n‚úÖ **Batch related items**: Group by transaction, user session, or business process\n‚úÖ **Handle partial failures**: Check `status` field for each item\n‚úÖ **Enable trace sparingly**: Only for debugging (increases response time)\n‚úÖ **Use async for 1000+ items**: Better for large batches and reduces timeouts\n\n### Common Use Cases\n\n**1. Transaction Batch Screening**\n```json\n{\n  \"items\": [\n    {\"id\": \"txn-001\", \"name\": \"Sender Name\"},\n    {\"id\": \"txn-001-recipient\", \"name\": \"Recipient Name\"}\n  ],\n  \"minMatch\": 0.90\n}\n```\n\n**2. Customer Onboarding Batch**\n```json\n{\n  \"items\": [\n    {\"id\": \"cust-100\", \"name\": \"Primary Account Holder\"},\n    {\"id\": \"cust-100-auth-1\", \"name\": \"Authorized User 1\"},\n    {\"id\": \"cust-100-auth-2\", \"name\": \"Authorized User 2\"}\n  ],\n  \"minMatch\": 0.85\n}\n```\n\n**3. Vendor Screening with Filters**\n```json\n{\n  \"items\": [\n    {\"id\": \"vendor-1\", \"name\": \"Supplier Co\", \"type\": \"BUSINESS\"},\n    {\"id\": \"vendor-2\", \"name\": \"Logistics LLC\", \"type\": \"BUSINESS\"}\n  ],\n  \"minMatch\": 0.85,\n  \"limit\": 5\n}\n```\n\n**4. Debug with Trace**\n```json\n{\n  \"items\": [{\"id\": \"test-1\", \"name\": \"Test Name\"}],\n  \"trace\": true,\n  \"minMatch\": 0.70\n}\n```\n\n### Error Handling\n\n**400 Bad Request**\n- Empty items array\n- More than 1000 items\n- Missing required fields (id, name)\n- Invalid parameter values\n\n**429 Too Many Requests**\n- Rate limit exceeded\n- Solution: Implement exponential backoff\n\n**503 Service Unavailable**\n- Service temporarily down\n- Solution: Retry with delay or use async endpoint\n\n### Sync vs Async\n\n**Use Sync (`/v1/search/batch`)** when:\n- Batch size < 1000 items\n- Need immediate results\n- Real-time transaction processing\n\n**Use Async (`/v1/search/batch/async`)** when:\n- Batch size > 1000 items\n- Can wait for results\n- Background job processing\n- Want to avoid timeouts",
      "item": [
        {
          "name": "Batch Screen - Simple",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\"requestId\": \"1\", \"name\": \"John Smith\"},\n    {\"requestId\": \"2\", \"name\": \"Acme Corporation\"},\n    {\"requestId\": \"3\", \"name\": \"Jane Doe\"}\n  ],\n  \"minMatch\": 0.85,\n  \"limit\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/search/batch",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search",
                "batch"
              ]
            },
            "description": "Screen multiple entities in a single request (max 1000 items)"
          },
          "response": [
            {
              "name": "Batch Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"results\": [\n    {\n      \"itemId\": \"1\",\n      \"name\": \"John Smith\",\n      \"matches\": [\n        {\n          \"entityId\": \"12345\",\n          \"name\": \"JOHN SMITH\",\n          \"type\": \"PERSON\",\n          \"source\": \"OFAC_SDN\",\n          \"score\": 0.98\n        }\n      ],\n      \"matchCount\": 1\n    },\n    {\n      \"itemId\": \"2\",\n      \"name\": \"Acme Corporation\",\n      \"matches\": [],\n      \"matchCount\": 0\n    },\n    {\n      \"itemId\": \"3\",\n      \"name\": \"Jane Doe\",\n      \"matches\": [],\n      \"matchCount\": 0\n    }\n  ],\n  \"statistics\": {\n    \"totalItems\": 3,\n    \"itemsWithMatches\": 1,\n    \"itemsWithoutMatches\": 2,\n    \"totalMatches\": 1,\n    \"processingTimeMs\": 45\n  }\n}"
            }
          ]
        },
        {
          "name": "Batch Screen - With Filters",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\"requestId\": \"cust-001\", \"name\": \"Global Trading LLC\", \"entityType\": \"BUSINESS\", \"source\": \"OFAC_SDN\"},\n    {\"requestId\": \"cust-002\", \"name\": \"Mohammad Ali\", \"entityType\": \"PERSON\"},\n    {\"requestId\": \"cust-003\", \"name\": \"Petrochemical Industries\", \"entityType\": \"BUSINESS\"},\n    {\"requestId\": \"cust-004\", \"name\": \"Al-Rashid Enterprises\", \"entityType\": \"BUSINESS\"},\n    {\"requestId\": \"cust-005\", \"name\": \"Northern Bank\", \"entityType\": \"BUSINESS\", \"source\": \"US_CSL\"}\n  ],\n  \"minMatch\": 0.80,\n  \"limit\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/search/batch",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search",
                "batch"
              ]
            },
            "description": "Batch screen with source and type filters"
          },
          "response": [
            {
              "name": "Filtered Batch Results",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"batchId\": \"batch-xyz-456\",\n  \"results\": [\n    {\n      \"requestId\": \"cust-001\",\n      \"query\": \"Global Trading LLC\",\n      \"status\": \"COMPLETED\",\n      \"errorMessage\": null,\n      \"matches\": [\n        {\n          \"entityId\": \"99887\",\n          \"name\": \"GLOBAL TRADING LIMITED\",\n          \"entityType\": \"BUSINESS\",\n          \"sourceList\": \"OFAC_SDN\",\n          \"score\": 0.89,\n          \"remarks\": \"Linked to sanctioned entity\"\n        }\n      ]\n    },\n    {\n      \"requestId\": \"cust-002\",\n      \"query\": \"Mohammad Ali\",\n      \"status\": \"COMPLETED\",\n      \"errorMessage\": null,\n      \"matches\": []\n    }\n  ],\n  \"statistics\": {\n    \"totalProcessed\": 5,\n    \"withMatches\": 1,\n    \"withoutMatches\": 4,\n    \"failed\": 0\n  },\n  \"totalItems\": 5,\n  \"totalMatches\": 1,\n  \"itemsWithMatches\": 1,\n  \"processingTimeMs\": 123,\n  \"processedAt\": \"2026-01-04T12:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Batch Screen - With ScoreTrace",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\"requestId\": \"1\", \"name\": \"John Smith\"},\n    {\"requestId\": \"2\", \"name\": \"Acme Corporation\"}\n  ],\n  \"minMatch\": 0.85,\n  \"limit\": 10,\n  \"trace\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/search/batch",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search",
                "batch"
              ]
            },
            "description": "Batch screening with trace enabled to see detailed scoring breakdowns per match"
          },
          "response": [
            {
              "name": "Batch Response with Trace",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"results\": [\n    {\n      \"itemId\": \"1\",\n      \"name\": \"John Smith\",\n      \"matches\": [\n        {\n          \"entityId\": \"12345\",\n          \"name\": \"JOHN SMITH\",\n          \"type\": \"PERSON\",\n          \"source\": \"OFAC_SDN\",\n          \"score\": 0.98,\n          \"breakdown\": {\n            \"primaryNameScore\": 0.98,\n            \"altNameScore\": 0.95,\n            \"addressScore\": 0.0,\n            \"dobScore\": 0.0,\n            \"idScore\": 0.0,\n            \"totalWeightedScore\": 0.98,\n            \"components\": [\n              {\n                \"field\": \"primaryName\",\n                \"queryValue\": \"John Smith\",\n                \"candidateValue\": \"JOHN SMITH\",\n                \"rawScore\": 0.98,\n                \"weight\": 1.0,\n                \"weightedScore\": 0.98\n              }\n            ]\n          }\n        }\n      ],\n      \"matchCount\": 1,\n      \"trace\": {\n        \"traceId\": \"batch-trace-1\",\n        \"events\": [\n          {\n            \"timestamp\": \"2026-01-11T00:00:00Z\",\n            \"phase\": \"NORMALIZATION\",\n            \"message\": \"Normalized query: John Smith -> john smith\"\n          },\n          {\n            \"timestamp\": \"2026-01-11T00:00:01Z\",\n            \"phase\": \"SCORING\",\n            \"message\": \"Scored 45 candidates\"\n          }\n        ]\n      }\n    },\n    {\n      \"itemId\": \"2\",\n      \"name\": \"Acme Corporation\",\n      \"matches\": [],\n      \"matchCount\": 0,\n      \"trace\": {\n        \"traceId\": \"batch-trace-2\",\n        \"events\": [\n          {\n            \"timestamp\": \"2026-01-11T00:00:00Z\",\n            \"phase\": \"NORMALIZATION\",\n            \"message\": \"Normalized query: Acme Corporation -> acme corporation\"\n          },\n          {\n            \"timestamp\": \"2026-01-11T00:00:01Z\",\n            \"phase\": \"SCORING\",\n            \"message\": \"No candidates above threshold\"\n          }\n        ]\n      }\n    }\n  ],\n  \"statistics\": {\n    \"totalItems\": 2,\n    \"itemsWithMatches\": 1,\n    \"itemsWithoutMatches\": 1,\n    \"totalMatches\": 1,\n    \"processingTimeMs\": 67\n  }\n}"
            }
          ]
        },
        {
          "name": "Batch Screen - Large (100 items)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\"requestId\": \"1\", \"name\": \"Customer One\"},\n    {\"requestId\": \"2\", \"name\": \"Customer Two\"},\n    {\"requestId\": \"3\", \"name\": \"Customer Three\"},\n    {\"requestId\": \"4\", \"name\": \"Customer Four\"},\n    {\"requestId\": \"5\", \"name\": \"Customer Five\"}\n  ],\n  \"minMatch\": 0.85,\n  \"limit\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/search/batch",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search",
                "batch"
              ]
            },
            "description": "Example large batch request (modify items array as needed, max 1000)"
          },
          "response": [
            {
              "name": "Large Batch Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"batchId\": \"batch-large-789\",\n  \"results\": [\n    {\n      \"requestId\": \"1\",\n      \"query\": \"Customer One\",\n      \"status\": \"COMPLETED\",\n      \"errorMessage\": null,\n      \"matches\": []\n    }\n  ],\n  \"statistics\": {\n    \"totalProcessed\": 5,\n    \"withMatches\": 0,\n    \"withoutMatches\": 5,\n    \"failed\": 0\n  },\n  \"totalItems\": 5,\n  \"totalMatches\": 0,\n  \"itemsWithMatches\": 0,\n  \"processingTimeMs\": 87,\n  \"processedAt\": \"2026-01-04T12:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Batch Screen - Async",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\"requestId\": \"async-1\", \"name\": \"Async Test One\"},\n    {\"requestId\": \"async-2\", \"name\": \"Async Test Two\"}\n  ],\n  \"minMatch\": 0.85,\n  \"limit\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/search/batch/async",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search",
                "batch",
                "async"
              ]
            },
            "description": "Submit batch for async processing (for very large batches)"
          },
          "response": [
            {
              "name": "Async Accepted",
              "status": "Accepted",
              "code": 202,
              "body": "{\n  \"jobId\": \"batch-job-12345\",\n  \"status\": \"PENDING\",\n  \"itemCount\": 2,\n  \"submittedAt\": \"2026-01-03T00:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Get Batch Config",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search/batch/config",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search",
                "batch",
                "config"
              ]
            },
            "description": "Get batch screening configuration and limits"
          },
          "response": [
            {
              "name": "Config Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"maxBatchSize\": 1000,\n  \"defaultMinMatch\": 0.85,\n  \"defaultLimit\": 10,\n  \"asyncThreshold\": 500,\n  \"supportedSources\": [\"OFAC_SDN\", \"US_CSL\", \"EU_CSL\", \"UK_CSL\"],\n  \"supportedTypes\": [\"PERSON\", \"BUSINESS\", \"VESSEL\", \"AIRCRAFT\"]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Data Management",
      "description": "## Data Management & Refresh\n\nDownload and refresh sanctions list data from authoritative sources.\n\n### Endpoints\n\n- **POST /v1/data/download** - Download latest data from OFAC, EU, UK sources\n- **POST /v1/data/refresh** - Refresh in-memory index with downloaded data\n\n### Data Sources\n\n| Source | Authority | Update Frequency | Entity Count |\n|--------|-----------|------------------|-------------|\n| **OFAC SDN** | US Treasury | Daily | ~12,500 |\n| **US CSL** | US Govt Agencies | Weekly | ~8,000 |\n| **EU CSL** | European Union | Daily | ~5,000 |\n| **UK CSL** | UK OFSI | Daily | ~3,000 |\n\n### Workflow\n\n```\n1. POST /v1/data/download  ‚Üí  Fetch latest data\n2. POST /v1/data/refresh   ‚Üí  Reload into memory\n3. GET /v1/listinfo        ‚Üí  Verify new counts\n```\n\n### Use Cases\n\n‚úÖ **Scheduled Updates**: Automate daily data refresh via cron/scheduler\n‚úÖ **Manual Refresh**: Update data after major sanctions announcements\n‚úÖ **Version Control**: Track data versions and update history\n‚úÖ **Compliance**: Maintain up-to-date sanctions screening data\n\n### Best Practices\n\n**Scheduling**:\n- Download daily at off-peak hours (e.g., 2 AM UTC)\n- Refresh immediately after successful download\n- Monitor for download failures and retry\n\n**Monitoring**:\n- Check entity counts after refresh (`/v1/listinfo`)\n- Alert if counts drop unexpectedly (data corruption)\n- Log download timestamps for audit trails\n\n**Zero Downtime**:\n- Refresh operation is atomic (old data serves until new data ready)\n- No service interruption during refresh\n- Rollback available if new data has issues\n\n### Response Codes\n\n| Code | Meaning | Action |\n|------|---------|--------|\n| 200 | Success | Data updated |\n| 202 | Accepted | Async operation started |\n| 409 | Conflict | Refresh already in progress |\n| 503 | Unavailable | Source unreachable, retry later |\n\n### Performance\n\n- **Download Time**: 30-60 seconds (depends on source availability)\n- **Refresh Time**: 5-10 seconds (in-memory reload)\n- **Impact**: Zero downtime, no request failures\n\n### Security\n\n- May require authentication/authorization in production\n- Restrict access to admin/ops roles only\n- Log all data management operations\n- Validate data integrity after download",
      "item": [
        {
          "name": "Refresh Data",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/download/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "download",
                "refresh"
              ]
            },
            "description": "Trigger manual refresh of sanctions data from all sources"
          },
          "response": [
            {
              "name": "Refresh Started",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"status\": \"REFRESHING\",\n  \"message\": \"Data refresh started\",\n  \"startedAt\": \"2026-01-03T00:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Get Download Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/download/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "download",
                "status"
              ]
            },
            "description": "Get current status of data downloads"
          },
          "response": [
            {
              "name": "Status Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"status\": \"READY\",\n  \"lastRefresh\": \"2026-01-03T00:00:00Z\",\n  \"sources\": [\n    {\"name\": \"OFAC_SDN\", \"status\": \"LOADED\", \"entityCount\": 12500, \"lastUpdated\": \"2026-01-03T00:00:00Z\"},\n    {\"name\": \"US_CSL\", \"status\": \"LOADED\", \"entityCount\": 8000, \"lastUpdated\": \"2026-01-03T00:00:00Z\"},\n    {\"name\": \"EU_CSL\", \"status\": \"LOADED\", \"entityCount\": 5000, \"lastUpdated\": \"2026-01-03T00:00:00Z\"},\n    {\"name\": \"UK_CSL\", \"status\": \"LOADED\", \"entityCount\": 3000, \"lastUpdated\": \"2026-01-03T00:00:00Z\"}\n  ]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Score Reports",
      "description": "## Score Reports Workflow\n\n**3-step workflow** to understand match decisions with detailed scoring breakdowns.\n\n### How It Works\n\n1. **STEP 1**: Search with `trace=true` ‚Üí Returns `sessionId` + breakdown in entities\n2. **STEP 2**: Use `sessionId` to get reports:\n   - **2a**: HTML report (visual, for humans)\n   - **2b**: JSON summary (stats, for automation)\n\n### Use Cases\n\n‚úÖ **Compliance Review**: HTML reports explain why entity matched\n‚úÖ **Developer Debugging**: JSON summaries show phase contributions\n‚úÖ **Performance Analysis**: Identify slow phases in scoring pipeline\n‚úÖ **Operator Insights**: Plain-English explanations of composite scores\n\n### Best Practices\n\n- Reports expire after 24 hours (in-memory storage)\n- HTML for customer/compliance explanations\n- JSON for dashboards and automated analysis\n- Each trace captures all entities scored in that search",
      "item": [
        {
          "name": "STEP 1: Search with trace=true",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/search?name=Nicolas Maduro&limit=1&trace=true",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "Nicolas Maduro"
                },
                {
                  "key": "limit",
                  "value": "1"
                },
                {
                  "key": "trace",
                  "value": "true",
                  "description": "Enable scoring trace"
                }
              ]
            },
            "description": "Example: Search with trace enabled to get a sessionId for report/summary requests. The response includes both trace data and a reportUrl."
          },
          "response": [
            {
              "name": "Search with Trace",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"entities\": [\n    {\n      \"id\": \"12345\",\n      \"name\": \"MADURO MOROS, Nicolas\",\n      \"score\": 0.92\n    }\n  ],\n  \"trace\": {\n    \"sessionId\": \"abc-123-def-456\",\n    \"durationMs\": 45,\n    \"events\": [...],\n    \"breakdown\": {...}\n  },\n  \"reportUrl\": \"/api/reports/abc-123-def-456\"\n}"
            }
          ],
          "description": "Search with trace enabled to get a sessionId. Response includes trace data, breakdown in entities, and reportUrl."
        },
        {
          "name": "STEP 2a: Get HTML Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/:sessionId",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                ":sessionId"
              ],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{traceSessionId}}",
                  "description": "Session ID from Step 1 response"
                }
              ]
            },
            "description": "Get a human-readable HTML report with visual score breakdown, plain English explanations, and processing timeline. Suitable for sharing with non-technical stakeholders."
          },
          "response": [
            {
              "name": "HTML Report",
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/html"
                }
              ],
              "body": "<!DOCTYPE html>\\n<html>\\n  <body>\\n    <h1>Score Trace Report</h1>\\n    <section class=\\\"score-breakdown\\\">\\n      <h2>Score Breakdown</h2>\\n      <div>Name Match: 95%</div>\\n    </section>\\n  </body>\\n</html>"
            }
          ],
          "description": "Get human-readable HTML report using sessionId from Step 1. Visual score breakdown with plain English explanations."
        },
        {
          "name": "STEP 2b: Get JSON Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reports/:sessionId/summary",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "reports",
                ":sessionId",
                "summary"
              ],
              "variable": [
                {
                  "key": "sessionId",
                  "value": "{{traceSessionId}}",
                  "description": "Session ID from Step 1 response"
                }
              ]
            },
            "description": "Get a JSON summary with aggregated statistics, phase contributions, and key insights. Shows the anatomy of composite scores - which of the 9 comparison phases contributed and how much. Designed for both developers and operators."
          },
          "response": [
            {
              "name": "Summary Response",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"sessionId\": \"abc-123\",\n  \"totalEntitiesScored\": 2,\n  \"averageScore\": 0.87,\n  \"highestScore\": 0.92,\n  \"lowestScore\": 0.82,\n  \"totalDurationMs\": 45,\n  \"phaseContributions\": {\n    \"NAME_COMPARISON\": 0.95,\n    \"ALT_NAME_COMPARISON\": 0.88,\n    \"ADDRESS_COMPARISON\": 0.0,\n    \"GOV_ID_COMPARISON\": 0.0,\n    \"CRYPTO_COMPARISON\": 0.0,\n    \"CONTACT_COMPARISON\": 0.0,\n    \"DATE_COMPARISON\": 0.0\n  },\n  \"phaseTimings\": {\n    \"NAME_COMPARISON\": 20,\n    \"ALT_NAME_COMPARISON\": 15,\n    \"AGGREGATION\": 5\n  },\n  \"slowestPhase\": \"NAME_COMPARISON\",\n  \"topMatches\": []\n}"
            }
          ],
          "description": "Get JSON summary using sessionId from Step 1. Shows phase contributions, timings, and insights for automation/dashboards."
        }
      ]
    }
  ]
}
